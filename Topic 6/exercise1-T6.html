<!DOCTYPE html> 
<html> 
	<head> 
	<title>Globant :: Welcome to the HTML5 bootcamp</title> 
	</head>	
	 
<body>
<div id="container">
    <button>Load</button>
    <ul id="list">
    </ul>
</div>
<div id="details">detalles
    <ul id="list">
    </ul>
</div>
 
<div id="list-template">
<li><a href=""></a></li>
</div>
<div id="detail-template">
<li></li>
</div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
<script type="text/javascript" src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
<script type="text/javascript" src="http://documentcloud.github.com/backbone/backbone-min.js"></script>	
 <script type="text/javascript">


  	Movie = Backbone.Model.extend({

		initialize: function(){
			this.bind('change:title', function(){console.log(this.get('title')+' has new title');});
			this.bind('error', function(model,error){console.log(error);});
		},
		defaults:{
			title: 'no title',
		},
		validate :function(attributes) {if(attributes.title.length > 20) return 'title too long';}
	});

	var terminator = new Movie();
	var ironman = new Movie();
	var smith = new Movie();

	MovieList = Backbone.Collection.extend({

		model : Movie,

		comparator: function(movie){return movie.get('title');}


	});

	var movielist = new MovieList();

	terminator.set({title : 'Terminator'});
	ironman.set({title : 'Ironman 2'});
	smith.set({title : 'Sr. & Sra. Smith'});

	movielist.add(terminator);
	movielist.add(ironman);
	movielist.add(smith)


	movielist.sort();

	console.log(movielist.at(0));
	console.log(movielist.at(1));
	console.log(movielist.at(2));



	var View = Backbone.View.extend({
    		initialize: function () {
        		this.template = $('#list-template').children();
    		},
    		el: '#container',
    		events: {
        		"click button": "render"
    		},
   		 render: function() {
        		var data = this.model;
			       
        		for (var i=0, l=data.length; i<l; i++) {
            			var li = this.template.clone().find('a').attr('href', '#').text(data.at(i).get('title')).end();
            			this.$el.find('ul').append(li);
        		}
    		}
	});
	var view = new View({ model: movielist });


	var DetailedView = Backbone.View.extend({

		initialize: function(){

			this.template = $('#detail-template').children();

		},
		el: '#details',
		events: {
        		"click button": "render"
    		},
		render: function(){
			var data = this.model.attributes;console.log('esto');
				for (var i=0, l=data.length; i<l; i++) {
            			//var li = this.template.clone().find('a').attr('href', '#').text(data.at(i).get('title')).end();
            			this.$el.find('ul').append('<li>'+data[i]+'</li>');
        		}



		}



	});

	var vistadetallada = new DetailedView({model : terminator});
	vistadetallada.render;








</script>
</body>
</html>
